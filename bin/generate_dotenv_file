#!/bin/bash
#
# This script is used to generate a .env file using the 1Password CLI.
set -e
source bin/shared/one_password

OP_ITEM="Engineering/strapi-aws-prod"
AWS_ACCESS_KEY_ID=$(op_read "op://${OP_ITEM}/AWS_ACCESS_KEY_ID")
AWS_ACCESS_SECRET=$(op_read "op://${OP_ITEM}/AWS_ACCESS_SECRET")

cp .env.example .env

echo "" >> .env
echo "" >> .env
echo "" >> .env
echo "# Generated by 1Password CLI" >> .env
echo "AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}" >> .env
echo "AWS_ACCESS_SECRET=${AWS_ACCESS_SECRET}" >> .env

echo "Done! See .env for your credentials."
